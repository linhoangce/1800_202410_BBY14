<!DOCTYPE html>
<html lang="en">

<head>
  <title>My BCIT Project - Farmify</title>
  <meta name="comp1800 template" content="My 1800 App">

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap Library CSS CDN go here -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

  <!-- Boostrap Library JS CDN  go here -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
    </script>

  <!-------------------------------------------------------->
  <!-- Firebase 8 Library related CSS, JS, JQuery go here -->
  <!-------------------------------------------------------->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.css" />
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

  <!-- Other libraries go here -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400..700;1,400..700&family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Protest+Revolution&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./styles/style.css">

  <!-- Link to styles of your own -->
  <link rel="stylesheet" href="./styles/style.css">

</head>

<body>

  <nav id="top-navbar-container" class="navbar fixed-top">
    <div class="container-fluid">
      <!-- <a class="navbar-brand" href="#"><img src="images/logo.png" height=40 alt="farmify"></a> -->

      <a class="navbar-brand bigger-arrow" href="main.html"><ion-icon name="arrow-back-outline"></ion-icon></a>

      <form class="d-flex mt-1" role="search">
        <input id="q" class="form-control me-1" type="search" placeholder="Search" aria-label="Search">
        <button onclick="performSearch()" class="btn btn-outline-success" type="submit"><ion-icon name="search-outline"
            size="large" style="color: white"></ion-icon></button>
      </form>

      <a href="cart.html">
        <ion-icon class="cart" name="cart-outline" size="large"></ion-icon>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
        aria-controls="offcanvasNavbar" aria-label="Toggle navigation" style="float:left;">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header">
          <p class="offcanvas-title" id="offcanvasNavbarLabel">More Information</p>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="AboutUs.html">About Us</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                More
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Account Setting</a></li>
                <li><a class="dropdown-item" href="#">Activities</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="contactus.html">Contact Us</a></li>
              </ul>
            </li>
          </ul>

        </div>
      </div>
    </div>
  </nav>

<!----------------------------->
<!-- CHAT MESSAGING GOES HERE-->
<!----------------------------->



<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat Log</title>
  <!-- Bootstrap CSS -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Custom styles for chat log */
    .chat-container {
      max-height: calc(100vh - 150px); /* Adjust 150px according to your design */
      overflow-y: auto;
    }
    .chat-message {
      padding: 10px;
      margin-bottom: 10px;
    }
    .user-1 {
      background-color: #f0f0f0;
      border-radius: 10px 10px 10px 0;
    }
    .user-2 {
      background-color: #cfe0d7;
      border-radius: 10px 10px 0 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="chat-container" id="chat-container">
      <div class="chat-message user-1">
        <strong>You:</strong> Hello there!
      </div>
      <div class="chat-message user-2">
        <strong>Farmer:</strong> Hi! How can I help you?
      </div>
    </div>
    <div class="input-group mt-3">
      <input type="text" class="form-control" id="message-input" placeholder="Type your message...">
      <div class="input-group-append">
        <button class="btn btn-primary" id="send-btn">Send</button>
      </div>
    </div>
  </div>

  <!-- Firebase JavaScript SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-firestore.js"></script>
  <script>
    
    // Initialize Firebase
  // Also re-defines the API keys since I couldnt find them anywhere in the .JS file explorer page.
    const firebaseConfig = {
    apiKey: "AIzaSyCYZHuxwD2nETWwgc6eH11uXmlKlx2GyHo",
    authDomain: "comp1800-bby14-b87af.firebaseapp.com",
    databaseURL: "https://comp1800-bby14-b87af-default-rtdb.firebaseio.com",
    projectId: "comp1800-bby14-b87af",
    storageBucket: "comp1800-bby14-b87af.appspot.com",
    messagingSenderId: "146512146276",
    appId: "1:146512146276:web:c76e20f4075f1bc8f5d471",
    measurementId: "G-9M2Q3B13XP"
    };
    firebase.initializeApp(firebaseConfig);

    // Initilizes and configures Firebase/Firestore
    const firestore = firebase.firestore();

    document.getElementById("send-btn").addEventListener("click", () => {
      const messageInput = document.getElementById("message-input");
      const message = messageInput.value.trim();
      if (message !== "") {
        // Add message to Firestore
        firestore.collection("messages").add({

          // Sends the message to FireStore
          text: message,

          // Sends the timestamp of the sender to FireStore. 
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        })
        .then(() => {
          console.log("Message sent to Firestore");
          messageInput.value = ""; // Clear input field after sending
        })
        .catch((error) => {
          // Sends error if message was not logged into FireStore
          console.error("Error sending message:", error);
        });
      }
    });
  </script>
</body>


<!----------------------------->
<!-- CHAT MESSAGING ENDS HERE-->
<!----------------------------->



  <!-- Bootstrap JS (Optional) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function() {
      $("#send-btn").click(function() {
        var message = $("#message-input").val();
        if (message.trim() !== "") {
          var chatMessage = '<div class="chat-message user-1"><strong>You:</strong> ' + message + '</div>';
          $("#chat-container").append(chatMessage);
          $("#message-input").val(""); // Clear input field after sending message
          // Scroll to bottom of chat container
          $("#chat-container").scrollTop($("#chat-container")[0].scrollHeight);
        }
      });
    });
  </script>
</body>
</html>





  <!-- our own footer goes here-->

  <footer id="bottom-navbar-main" class="navbar fixed-bottom">
    <div class="container">
      <div id="home-container">
        <ion-icon id="home-btn" class="buttons" name="home-outline" size="large"></ion-icon>
        <span id="home-sig">Home</span>
      </div>
      <div id="message-container">
        <ion-icon id="chat-btn" class="buttons" name="chatbubble-ellipses-outline" size="large"></ion-icon>
        <span id="chat-sig">Message</span>
      </div>
      <!-- Define the button with Ionicon -->

      <div id="create-post-container">

        <ion-icon id="create-post-btn" class="buttons" name="add-circle-outline" size="large"></ion-icon>
        <span id="create-post-sig">Post</span>
      </div>



      <div id="notification-container">
        <ion-icon id="notification-btn" class="buttons" name="notifications-outline" size="large"></ion-icon>
        <span id="notification-sig">Notification</span>
      </div>

      <div id="account-container">
        <ion-icon id="account-btn" class="buttons" name="person-outline" size="large"></ion-icon>
        <span id="account-sig">Account</span>
      </div>

    </div>
  </footer>


  <!-- Your own JavaScript functions go here    -->
  <!---------------------------------------------->
  <script src="./scripts/firebaseAPI_TEAM99.js"></script>
  <script src="./scripts/skeleton.js"></script>
  <script src="./scripts/main.js"></script>
  <script src="./scripts/filter_categories.js"></script>
  <script src="./scripts/home.js"></script>
  <script src="./scripts/create_post.js"></script>



  <!-- <script type="module" src="./scripts/firesearch.gen.js"></script> -->
  <!-- <script type="module" src="./scripts/search.js"></script> -->
  <!-- Link to scripts of your own -->
  <!--<script src="./scripts/script.js"></script> -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</body>

</html>